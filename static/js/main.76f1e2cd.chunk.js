(this["webpackJsonpmobx-redux-perf"]=this["webpackJsonpmobx-redux-perf"]||[]).push([[0],{14:function(e,t,n){},20:function(e,t,n){},27:function(e,t,n){"use strict";n.r(t);var o=n(0),c=n.n(o),i=n(4),r=n.n(i),d=(n(20),n(5)),u=(n(14),n(12)),s=n(9),l=n(10),a=n(2),j=n(28),f=n(1);function b(){var e="every good boy does fine please excuse my dear aunt susy".split(" ");return new Array(7).fill("").map((function(){return e[h(e.length)]})).join(" ")}function h(e){return Math.round(Math.random()*e)}var g=function(){var e=Object(o.useRef)(1);return Object(o.useEffect)((function(){e.current++})),Object(f.jsx)("div",{className:"count-render",children:e.current})},O=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(s.a)(this,e),this.id=Object(j.a)(),this.title="",this.done=!1,this.setTitle(t),this.setDone(n),Object(a.e)(this)}return Object(l.a)(e,[{key:"toggleDone",value:function(){this.setDone(!this.done)}},{key:"setDone",value:function(e){this.done=e}},{key:"setTitle",value:function(e){this.title=e}}]),e}(),v=new(function(){function e(){Object(s.a)(this,e),this.todos=[],Object(a.e)(this)}return Object(l.a)(e,[{key:"pendingTodos",get:function(){return this.todos.filter((function(e){return!e.done}))}},{key:"addTodo",value:function(e){this.todos.push(e)}},{key:"removeTodo",value:function(e){this.todos.splice(e,1)}},{key:"clearAll",value:function(){this.todos=[]}},{key:"findTodo",value:function(e){return this.todos.find((function(t){return t.id===e}))}}]),e}());function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b(),t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];v.addTodo(new O(e,t))}function x(e){var t,n;"number"===typeof e?null===(t=v.todos[e])||void 0===t||t.toggleDone():null===(n=v.findTodo(e))||void 0===n||n.toggleDone()}var m=!1,y=function(){if(m=!m){var e=Object(a.b)((function(){m&&(console.group("running updates"),new Array(25).fill(0).forEach((function(){var e=-1;switch(h(4)){case 0:e=h(v.todos.length),console.log("updating title at",e,"/",v.todos.length),function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b();null===(t=v.todos[e])||void 0===t||t.setTitle(n)}(e,b());break;case 1:e=h(v.todos.length),console.log("toggling done at",e,"/",v.todos.length),x(e);break;case 2:v.todos.length>7&&(e=h(v.todos.length),console.log("removing at",e,"/",v.todos.length),function(e){v.removeTodo(e)}(e),console.count("change length"));break;case 3:console.log("adding new item"),p(b(),h(2)>1),v.addTodo(new O(b(),h(2)>1)),console.count("change length")}})),console.groupEnd(),setTimeout(e,50+h(150)))}));e()}},T=Object(u.a)((function(e){var t=e.todo;return Object(f.jsxs)("li",{className:t.done?"completed":"",onClick:function(){return x(t.id)},children:[t.title," ",Object(f.jsx)(g,{})]})})),k=Object(u.a)((function(e){var t=e.store,n=Object(o.useState)(!1),c=Object(d.a)(n,2),i=c[0],r=c[1],u=i?t.pendingTodos:t.todos;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("h3",{children:"mobx: Re-rendering long lists"}),Object(f.jsx)("p",{children:"mobx allows fine-grain updates, which only re-render the necessary components."}),Object(f.jsxs)("div",{children:["Render count: ",Object(f.jsx)(g,{}),"\xa0 | \xa0 Total items: ",u.length," / ",t.todos.length,"\xa0 | \xa0",Object(f.jsxs)("label",{children:[Object(f.jsx)("input",{type:"checkbox",onChange:function(e){return r(e.target.checked)}})," Hide completed?"]}),"\xa0 | \xa0",Object(f.jsx)("button",{onClick:y,children:"Simulate remote updates"})]}),Object(f.jsx)("ul",{children:u.map((function(e){return Object(f.jsx)(T,{todo:e},e.id)}))})]})}));var w=function(){return Object(o.useEffect)((function(){return new Array(1e3).fill(0).forEach((function(){p(b(),h(2)>1)})),function(){v.clearAll(),m=!1}}),[]),Object(f.jsx)(k,{store:v})},E=n(3),C=n(13),S=n(6),R=Object(C.b)({name:"todos",initialState:{todos:{}},reducers:{addTodo:function(e,t){var n=t.payload,o=n.title,c=n.done,i=Object(j.a)();e.todos[i]={id:i,title:null!==o&&void 0!==o?o:b(),done:null!==c&&void 0!==c&&c}},removeTodo:function(e,t){var n=t.payload;delete e.todos[n]},toggleTodo:function(e,t){var n=t.payload,o=e.todos[n];o&&(o.done=!o.done)},clearTodos:function(e){e.todos={}},updateTodo:function(e,t){var n=t.payload,o=n.id,c=n.title,i=e.todos[o];i&&(i.title=c)}}}),A=Object(S.a)((function(e){return e.todoList}),(function(e){return Object.values(e.todos)})),D=(Object(S.a)(A,(function(e){return e.filter((function(e){return e.done}))})),Object(S.a)(A,(function(e){return e.filter((function(e){return!e.done}))}))),F=Object(C.a)({reducer:{todoList:R.reducer}}),L=R.actions,M=L.toggleTodo,N=L.addTodo,B=L.clearTodos,H=L.removeTodo,I=L.updateTodo,J=function(e){var t=e.id,n=Object(E.d)(function(e){return function(t){return t.todoList.todos[e]}}(t));return Object(f.jsxs)("li",{className:n.done?"completed":"",onClick:function(){return M(n.id)},children:[n.title," ",Object(f.jsx)(g,{})]})},P=function(){var e=Object(o.useState)(!1),t=Object(d.a)(e,2),n=t[0],c=t[1],i=Object(o.useState)(!1),r=Object(d.a)(i,2),u=r[0],s=r[1],l=Object(E.d)(A),a=Object(E.d)(D),j=n?a:l;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("h3",{children:"Redux: Re-rendering long lists"}),Object(f.jsxs)("div",{children:["Render count: ",Object(f.jsx)(g,{}),"\xa0 | \xa0 Total items: ",j.length," / ",j.length,"\xa0 | \xa0",Object(f.jsxs)("label",{children:[Object(f.jsx)("input",{type:"checkbox",onChange:function(e){return c(e.target.checked)}})," Hide completed?"]}),"\xa0 | \xa0",Object(f.jsx)("button",{onClick:function(){return s(!u)},children:"Simulate remote updates"})]}),Object(f.jsx)("ul",{children:j.map((function(e){return Object(f.jsx)(J,{id:e.id},e.id)}))}),u&&Object(f.jsx)(q,{})]})},q=function(){var e=Object(E.c)(),t=Object(E.d)(A),n=Object(o.useState)(!1),c=Object(d.a)(n,2),i=c[0],r=c[1],u=Object(o.useRef)();return Object(o.useEffect)((function(){return clearTimeout(u.current),u.current=setTimeout((function(){return Object(E.b)((function(){console.group("running updates");var n=t.length;new Array(25).fill(0).forEach((function(){var o=-1;switch(h(4)){case 0:o=h(n),console.log("updating title at",o,"/",t.length),e(I({id:t[o].id,title:b()}));break;case 1:o=h(n),console.log("toggling done at",o,"/",t.length),e(M(t[o].id));break;case 2:t.length>7&&(o=h(n),console.log("removing at",o,"/",t.length),e(H(t[o].id)),console.count("change length"),n--);break;case 3:console.log("adding new item"),e(N({title:b(),done:h(2)>1})),console.count("change length"),n++}})),console.groupEnd(),r(!i)}))}),50+h(150)),function(){return clearTimeout(u.current)}}),[e,t,i]),null};function z(){var e=Object(E.c)();return Object(o.useEffect)((function(){return Object(E.b)((function(){new Array(1e3).fill(0).forEach((function(){e(N({title:b(),done:h(2)>1}))}))})),function(){e(B())}}),[e]),null}var G=function(){return Object(f.jsxs)(E.a,{store:F,children:[Object(f.jsx)(z,{}),Object(f.jsx)(P,{})]})},K=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,29)).then((function(t){var n=t.getCLS,o=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),o(e),c(e),i(e),r(e)}))};r.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsxs)("div",{style:{display:"flex"},children:[Object(f.jsx)("div",{style:{width:"50%",padding:"10px",borderRight:"1px solid"},children:Object(f.jsx)(w,{})}),Object(f.jsx)("div",{style:{width:"50%",padding:"10px"},children:Object(f.jsx)(G,{})})]})}),document.getElementById("root")),K()}},[[27,1,2]]]);
//# sourceMappingURL=main.76f1e2cd.chunk.js.map