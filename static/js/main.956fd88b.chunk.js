(this["webpackJsonpmobx-redux-perf"]=this["webpackJsonpmobx-redux-perf"]||[]).push([[0],{14:function(e,t,n){},20:function(e,t,n){},27:function(e,t,n){"use strict";n.r(t);var o=n(0),c=n.n(o),i=n(4),r=n.n(i),d=(n(20),n(5)),s=(n(14),n(12)),u=n(9),l=n(10),a=n(2),j=n(28),h=n(1);function b(){var e="every good boy does fine please excuse my dear aunt susy".split(" ");return new Array(7).fill("").map((function(){return e[f(e.length)]})).join(" ")}function f(e){return Math.round(Math.random()*e)}var g=function(){var e=Object(o.useRef)(1);return Object(o.useEffect)((function(){e.current++})),Object(h.jsx)("div",{className:"count-render",children:e.current})},O=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(u.a)(this,e),this.id=Object(j.a)(),this.title="",this.done=!1,this.setTitle(t),this.setDone(n),Object(a.e)(this)}return Object(l.a)(e,[{key:"toggleDone",value:function(){this.setDone(!this.done)}},{key:"setDone",value:function(e){this.done=e}},{key:"setTitle",value:function(e){this.title=e}}]),e}(),p=new(function(){function e(){Object(u.a)(this,e),this.todos=[],Object(a.e)(this)}return Object(l.a)(e,[{key:"pendingTodos",get:function(){return this.todos.filter((function(e){return!e.done}))}},{key:"addTodo",value:function(e){this.todos.push(e)}},{key:"removeTodo",value:function(e){this.todos.splice(e,1)}},{key:"clearAll",value:function(){this.todos=[]}},{key:"findTodo",value:function(e){return this.todos.find((function(t){return t.id===e}))}}]),e}());function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b(),t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];p.addTodo(new O(e,t))}function v(e){var t,n;"number"===typeof e?null===(t=p.todos[e])||void 0===t||t.toggleDone():null===(n=p.findTodo(e))||void 0===n||n.toggleDone()}var m=!1,y=function(){if(m=!m){var e=Object(a.b)((function(){m&&(console.group("running updates"),new Array(25).fill(0).forEach((function(){var e=-1;switch(f(4)){case 0:e=f(p.todos.length),console.log("updating title at",e,"/",p.todos.length),function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b();null===(t=p.todos[e])||void 0===t||t.setTitle(n)}(e,b());break;case 1:e=f(p.todos.length),console.log("toggling done at",e,"/",p.todos.length),v(e);break;case 2:p.todos.length>7&&(e=f(p.todos.length),console.log("removing at",e,"/",p.todos.length),function(e){p.removeTodo(e)}(e),console.count("change length"));break;case 3:console.log("adding new item"),x(b(),f(2)>1),p.addTodo(new O(b(),f(2)>1)),console.count("change length")}})),console.groupEnd(),setTimeout(e,50+f(150)))}));e()}},T=Object(s.a)((function(e){var t=e.todo;return Object(h.jsxs)("li",{className:t.done?"completed":"",onClick:function(){return v(t.id)},children:[t.title," ",Object(h.jsx)(g,{})]})})),k=Object(s.a)((function(e){var t=e.store,n=Object(o.useState)(!1),c=Object(d.a)(n,2),i=c[0],r=c[1],s=i?t.pendingTodos:t.todos;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h3",{children:"mobx: Re-rendering long lists"}),Object(h.jsx)("p",{children:"mobx allows fine-grain updates, which only re-render the necessary components."}),Object(h.jsx)("p",{children:Object(h.jsx)("a",{href:"https://github.com/schontz/mobx-redux-perf",children:"GitHub repo"})}),Object(h.jsxs)("div",{children:["Render count: ",Object(h.jsx)(g,{}),"\xa0 | \xa0 Total items: ",s.length," / ",t.todos.length,"\xa0 | \xa0",Object(h.jsxs)("label",{children:[Object(h.jsx)("input",{type:"checkbox",onChange:function(e){return r(e.target.checked)}})," Hide completed?"]}),"\xa0 | \xa0",Object(h.jsx)("button",{onClick:y,children:"Simulate remote updates"})]}),Object(h.jsx)("ul",{children:s.map((function(e){return Object(h.jsx)(T,{todo:e},e.id)}))})]})}));var w=function(){return Object(o.useEffect)((function(){return new Array(1e3).fill(0).forEach((function(){x(b(),f(2)>1)})),function(){p.clearAll(),m=!1}}),[]),Object(h.jsx)(k,{store:p})},E=n(3),C=n(13),R=n(6),S=Object(C.b)({name:"todos",initialState:{todos:{}},reducers:{addTodo:function(e,t){var n=t.payload,o=n.title,c=n.done,i=Object(j.a)();e.todos[i]={id:i,title:null!==o&&void 0!==o?o:b(),done:null!==c&&void 0!==c&&c}},removeTodo:function(e,t){var n=t.payload;delete e.todos[n]},toggleTodo:function(e,t){var n=t.payload,o=e.todos[n];o&&(o.done=!o.done)},clearTodos:function(e){e.todos={}},updateTodo:function(e,t){var n=t.payload,o=n.id,c=n.title,i=e.todos[o];i&&(i.title=c)}}}),A=Object(R.a)((function(e){return e.todoList}),(function(e){return Object.values(e.todos)})),D=(Object(R.a)(A,(function(e){return e.filter((function(e){return e.done}))})),Object(R.a)(A,(function(e){return e.filter((function(e){return!e.done}))}))),F=Object(C.a)({reducer:{todoList:S.reducer}}),L=S.actions,H=L.toggleTodo,M=L.addTodo,N=L.clearTodos,z=L.removeTodo,B=L.updateTodo,G=function(e){var t=e.id,n=Object(E.d)(function(e){return function(t){return t.todoList.todos[e]}}(t));return Object(h.jsxs)("li",{className:n.done?"completed":"",onClick:function(){return H(n.id)},children:[n.title," ",Object(h.jsx)(g,{})]})},I=function(){var e=Object(o.useState)(!1),t=Object(d.a)(e,2),n=t[0],c=t[1],i=Object(o.useState)(!1),r=Object(d.a)(i,2),s=r[0],u=r[1],l=Object(E.d)(A),a=Object(E.d)(D),j=n?a:l;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h3",{children:"Redux: Re-rendering long lists"}),Object(h.jsx)("p",{children:"Redux re-renders the whole list."}),Object(h.jsx)("p",{children:Object(h.jsx)("a",{href:"https://github.com/schontz/mobx-redux-perf",children:"GitHub repo"})}),Object(h.jsxs)("div",{children:["Render count: ",Object(h.jsx)(g,{}),"\xa0 | \xa0 Total items: ",j.length," / ",j.length,"\xa0 | \xa0",Object(h.jsxs)("label",{children:[Object(h.jsx)("input",{type:"checkbox",onChange:function(e){return c(e.target.checked)}})," Hide completed?"]}),"\xa0 | \xa0",Object(h.jsx)("button",{onClick:function(){return u(!s)},children:"Simulate remote updates"})]}),Object(h.jsx)("ul",{children:j.map((function(e){return Object(h.jsx)(G,{id:e.id},e.id)}))}),s&&Object(h.jsx)(J,{})]})},J=function(){var e=Object(E.c)(),t=Object(E.d)(A),n=Object(o.useState)(!1),c=Object(d.a)(n,2),i=c[0],r=c[1],s=Object(o.useRef)();return Object(o.useEffect)((function(){return clearTimeout(s.current),s.current=setTimeout((function(){return Object(E.b)((function(){console.group("running updates");var n=t.length;new Array(25).fill(0).forEach((function(){var o=-1;switch(f(4)){case 0:o=f(n),console.log("updating title at",o,"/",t.length),e(B({id:t[o].id,title:b()}));break;case 1:o=f(n),console.log("toggling done at",o,"/",t.length),e(H(t[o].id));break;case 2:t.length>7&&(o=f(n),console.log("removing at",o,"/",t.length),e(z(t[o].id)),console.count("change length"),n--);break;case 3:console.log("adding new item"),e(M({title:b(),done:f(2)>1})),console.count("change length"),n++}})),console.groupEnd(),r(!i)}))}),50+f(150)),function(){return clearTimeout(s.current)}}),[e,t,i]),null};function P(){var e=Object(E.c)();return Object(o.useEffect)((function(){return Object(E.b)((function(){new Array(1e3).fill(0).forEach((function(){e(M({title:b(),done:f(2)>1}))}))})),function(){e(N())}}),[e]),null}var q=function(){return Object(h.jsxs)(E.a,{store:F,children:[Object(h.jsx)(P,{}),Object(h.jsx)(I,{})]})},K=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,29)).then((function(t){var n=t.getCLS,o=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),o(e),c(e),i(e),r(e)}))};r.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsxs)("div",{style:{display:"flex"},children:[Object(h.jsx)("div",{style:{width:"50%",padding:"10px",borderRight:"1px solid"},children:Object(h.jsx)(w,{})}),Object(h.jsx)("div",{style:{width:"50%",padding:"10px"},children:Object(h.jsx)(q,{})})]})}),document.getElementById("root")),K()}},[[27,1,2]]]);
//# sourceMappingURL=main.956fd88b.chunk.js.map