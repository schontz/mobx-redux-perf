(this["webpackJsonpmobx-redux-perf"]=this["webpackJsonpmobx-redux-perf"]||[]).push([[0],{14:function(e,t,n){},20:function(e,t,n){},27:function(e,t,n){"use strict";n.r(t);var o=n(0),c=n.n(o),r=n(4),i=n.n(r),s=(n(20),n(5)),d=(n(14),n(12)),u=n(9),l=n(10),a=n(2),b=n(28),j=n(1);function h(){var e="every good boy does fine please excuse my dear aunt susy".split(" ");return new Array(7).fill("").map((function(){return e[f(e.length)]})).join(" ")}function f(e){return Math.round(Math.random()*e)}var g=function(){var e=Object(o.useRef)(1);return Object(o.useEffect)((function(){e.current++})),Object(j.jsx)("div",{className:"count-render",children:e.current})},O=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(u.a)(this,e),this.id=Object(b.a)(),this.title="",this.done=!1,this.setTitle(t),this.setDone(n),Object(a.e)(this)}return Object(l.a)(e,[{key:"toggleDone",value:function(){this.setDone(!this.done)}},{key:"setDone",value:function(e){this.done=e}},{key:"setTitle",value:function(e){this.title=e}}]),e}(),x=new(function(){function e(){Object(u.a)(this,e),this.todos=[],Object(a.e)(this)}return Object(l.a)(e,[{key:"pendingTodos",get:function(){return this.todos.filter((function(e){return!e.done}))}},{key:"addTodo",value:function(e){this.todos.push(e)}},{key:"removeTodo",value:function(e){this.todos.splice(e,1)}},{key:"clearAll",value:function(){this.todos=[]}},{key:"findTodo",value:function(e){return this.todos.find((function(t){return t.id===e}))}}]),e}());function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h(),t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];x.addTodo(new O(e,t))}function m(e){var t,n;"number"===typeof e?null===(t=x.todos[e])||void 0===t||t.toggleDone():null===(n=x.findTodo(e))||void 0===n||n.toggleDone()}var v=!1,y=function(){if(v=!v){var e=Object(a.b)((function(){v&&(console.group("running updates"),new Array(25).fill(0).forEach((function(){var e=-1;switch(f(4)){case 0:e=f(x.todos.length),console.log("updating title at",e,"/",x.todos.length),function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h();null===(t=x.todos[e])||void 0===t||t.setTitle(n)}(e,h());break;case 1:e=f(x.todos.length),console.log("toggling done at",e,"/",x.todos.length),m(e);break;case 2:x.todos.length>7&&(e=f(x.todos.length),console.log("removing at",e,"/",x.todos.length),function(e){x.removeTodo(e)}(e),console.count("change length"));break;case 3:console.log("adding new item"),p(h(),f(2)>1),x.addTodo(new O(h(),f(2)>1)),console.count("change length")}})),console.groupEnd(),setTimeout(e,50+f(150)))}));e()}},T=Object(d.a)((function(e){var t=e.todo;return Object(j.jsxs)("li",{className:t.done?"completed":"",onClick:function(){return m(t.id)},children:[t.title," ",Object(j.jsx)(g,{})]})})),k=Object(d.a)((function(e){var t=e.store,n=Object(o.useState)(!1),c=Object(s.a)(n,2),r=c[0],i=c[1],d=r?t.pendingTodos:t.todos;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h3",{children:"mobx: Re-rendering long lists"}),Object(j.jsx)("p",{children:"mobx allows fine-grain updates, which only re-render the necessary components."}),Object(j.jsxs)("p",{children:["Source:"," ",Object(j.jsx)("a",{href:"https://github.com/schontz/mobx-redux-perf/blob/master/src/AppMobx.tsx",children:"AppMobx.tsx"}),"| ",Object(j.jsx)("a",{href:"https://github.com/schontz/mobx-redux-perf/blob/master/src/mobx.tsx",children:"mobx.tsx"})]}),Object(j.jsxs)("div",{children:["Render count: ",Object(j.jsx)(g,{}),"\xa0 | \xa0 Total items: ",d.length," / ",t.todos.length,"\xa0 | \xa0",Object(j.jsxs)("label",{children:[Object(j.jsx)("input",{type:"checkbox",onChange:function(e){return i(e.target.checked)}})," Hide completed?"]}),"\xa0 | \xa0",Object(j.jsx)("button",{onClick:y,children:"Simulate remote updates"})]}),Object(j.jsx)("ul",{children:d.map((function(e){return Object(j.jsx)(T,{todo:e},e.id)}))})]})}));var w=function(){return Object(o.useEffect)((function(){return new Array(1e3).fill(0).forEach((function(){p(h(),f(2)>1)})),function(){x.clearAll(),v=!1}}),[]),Object(j.jsx)(k,{store:x})},A=n(3),E=n(13),R=n(6),S=Object(E.b)({name:"todos",initialState:{todos:{}},reducers:{addTodo:function(e,t){var n=t.payload,o=n.title,c=n.done,r=Object(b.a)();e.todos[r]={id:r,title:null!==o&&void 0!==o?o:h(),done:null!==c&&void 0!==c&&c}},removeTodo:function(e,t){var n=t.payload;delete e.todos[n]},toggleTodo:function(e,t){var n=t.payload,o=e.todos[n];o?o.done=!o.done:console.error("toggleTodo: no todo found",n)},clearTodos:function(e){e.todos={}},updateTodo:function(e,t){var n=t.payload,o=n.id,c=n.title,r=e.todos[o];r?r.title=c:console.error("updateTodo: no todo found",o)}}}),C=function(e){return e.todoList},D=Object(R.a)(C,(function(e){return Object.values(e.todos)})),F=Object(R.a)(C,(function(e){return Object.keys(e.todos)})),L=(Object(R.a)(D,(function(e){return e.filter((function(e){return e.done}))})),Object(R.a)(D,(function(e){return e.filter((function(e){return!e.done}))}))),M=Object(R.a)(L,(function(e){return e.map((function(e){return e.id}))})),z=Object(E.a)({reducer:{todoList:S.reducer}}),N=S.actions,B=N.toggleTodo,H=N.addTodo,I=N.clearTodos,J=N.removeTodo,P=N.updateTodo,q=c.a.memo((function(e){var t=e.id,n=Object(A.d)(function(e){return function(t){return t.todoList.todos[e]}}(t)),o=Object(A.c)();return Object(j.jsxs)("li",{className:n.done?"completed":"",onClick:function(){return o(B(n.id))},children:[n.title," ",Object(j.jsx)(g,{})]})})),G=function(){var e=Object(o.useState)(!1),t=Object(s.a)(e,2),n=t[0],c=t[1],r=Object(o.useState)(!1),i=Object(s.a)(r,2),d=i[0],u=i[1],l=Object(A.d)(F),a=Object(A.d)(M),b=n?a:l;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h3",{children:"Redux: Re-rendering long lists"}),Object(j.jsx)("p",{children:"Redux re-renders the whole list."}),Object(j.jsxs)("p",{children:["Source:"," ",Object(j.jsx)("a",{href:"https://github.com/schontz/mobx-redux-perf/blob/master/src/AppRedux.tsx",children:"AppRedux.tsx"}),"|"," ",Object(j.jsx)("a",{href:"https://github.com/schontz/mobx-redux-perf/blob/master/src/redux.tsx",children:"redux.tsx"})]}),Object(j.jsxs)("div",{children:["Render count: ",Object(j.jsx)(g,{}),"\xa0 | \xa0 Total items: ",b.length," / ",b.length,"\xa0 | \xa0",Object(j.jsxs)("label",{children:[Object(j.jsx)("input",{type:"checkbox",onChange:function(e){return c(e.target.checked)}})," Hide completed?"]}),"\xa0 | \xa0",Object(j.jsx)("button",{onClick:function(){return u(!d)},children:"Simulate remote updates"})]}),Object(j.jsx)("ul",{children:b.map((function(e){return Object(j.jsx)(q,{id:e},e)}))}),d&&Object(j.jsx)(K,{})]})},K=function(){var e=Object(A.c)(),t=Object(A.d)(F),n=Object(o.useState)(!1),c=Object(s.a)(n,2),r=c[0],i=c[1],d=Object(o.useRef)();return Object(o.useEffect)((function(){return clearTimeout(d.current),d.current=setTimeout((function(){return Object(A.b)((function(){console.group("running updates");var n=t.length;new Array(25).fill(0).forEach((function(){var o=-1;switch(f(4)){case 0:o=f(n),console.log("updating title at",o,"/",t.length),e(P({id:t[o],title:h()}));break;case 1:o=f(n),console.log("toggling done at",o,"/",t.length),e(B(t[o]));break;case 2:t.length>7&&(o=f(n),console.log("removing at",o,"/",t.length),e(J(t[o])),console.count("change length"),n--);break;case 3:console.log("adding new item"),e(H({title:h(),done:f(2)>1})),console.count("change length")}})),console.groupEnd(),i(!r)}))}),50+f(150)),function(){return clearTimeout(d.current)}}),[e,t,r]),null};function Q(){var e=Object(A.c)();return Object(o.useEffect)((function(){return Object(A.b)((function(){new Array(1e3).fill(0).forEach((function(){e(H({title:h(),done:f(2)>1}))}))})),function(){e(I())}}),[e]),null}var U=function(){return Object(j.jsxs)(A.a,{store:z,children:[Object(j.jsx)(Q,{}),Object(j.jsx)(G,{})]})},V=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,29)).then((function(t){var n=t.getCLS,o=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),o(e),c(e),r(e),i(e)}))};i.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsxs)("div",{style:{display:"flex"},children:[Object(j.jsx)("div",{style:{width:"50%",padding:"10px",borderRight:"1px solid"},children:Object(j.jsx)(w,{})}),Object(j.jsx)("div",{style:{width:"50%",padding:"10px"},children:Object(j.jsx)(U,{})})]})}),document.getElementById("root")),V()}},[[27,1,2]]]);
//# sourceMappingURL=main.0bd04337.chunk.js.map